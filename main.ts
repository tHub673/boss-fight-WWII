namespace SpriteKind {
    export const tree = SpriteKind.create()
    export const Monkey = SpriteKind.create()
    export const ball = SpriteKind.create()
    export const Boss = SpriteKind.create()
}
controller.up.onEvent(ControllerButtonEvent.Pressed, function () {
    soldier.vy = -70
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.tree, function (sprite, otherSprite) {
    Level2()
    game.showLongText("Find your pet monkey for this next part. Beware though, your enemy is not dead. He is deformed but wants revenge. ", DialogLayout.Bottom)
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Monkey, function (sprite, otherSprite) {
    level3()
    level2End.destroy(effects.spray, 100)
    game.showLongText("Your enemy is now dead but his big father isn't. He wants to kill you.", DialogLayout.Bottom)
    game.showLongText("It will take you a few hit's to kill him. Good luck!", DialogLayout.Bottom)
})
function Level2 () {
    tiles.setTilemap(tilemap`level2`)
    soldier.setPosition(30, 415)
    attackers.setPosition(700, 460)
    level2End = sprites.create(img`
        . . . . f f f f f . . . . . . . 
        . . . f e e e e e f . . . . . . 
        . . f d d d d e e e f f . . . . 
        . c d d d d d d e e d d f . . . 
        . c d f d d f d e e b d c . . . 
        c d d f d d f d e e b d c . f f 
        c d e e d d d d e e f c . f e f 
        c d d d d c d e e e f . . f e f 
        . f c c c d e e e f f . . f e f 
        . . f f f f f e e e e f . f e f 
        . . . . f e e e e e e e f f f . 
        . . f f e f e e f e e e e f . . 
        . f e f f e e f f f e e e f . . 
        f d d b d d c f f f f f f b f . 
        f d d c d d d f . . f c d d f . 
        . f f f f f f f . . . f f f . . 
        `, SpriteKind.Monkey)
    level2End.setPosition(775, 455)
}
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    projectile = sprites.createProjectileFromSprite(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . 2 2 . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, soldier, 650, 0)
    projectile.startEffect(effects.fire, 50)
    scene.cameraShake(3, 50)
})
sprites.onOverlap(SpriteKind.Projectile, SpriteKind.Boss, function (sprite, otherSprite) {
    statusbar.value += -10
})
function level3 () {
    tiles.setTilemap(tilemap`level4`)
    soldier.setPosition(30, 415)
    Final_Boss = sprites.create(img`
        ..................................................
        ..................................................
        ..................................................
        ................ffffffffffffffff..................
        ................f22222222222222fffff..............
        ................f222222222222222222fff............
        ................f222222222222222222222ff..........
        ................f2222222222222222222222ff.........
        ................f22222222222222222222222ff........
        ................f2222222222222222222222222ff......
        ................f22222222222222222222222222ff.....
        ................ffffffffffffffffff2222222222f.....
        .................fdddfffffddddddddf222222222f.....
        .................fddff2211ddddddddd22222222ff.....
        .................fddd22211dddddddddddfffffff......
        .................fddd22211dddddddddddddff.........
        .................fddd22211dddddddddddddf..........
        .................fdddddddddddddddddddddf..........
        ................ffddddddddddddddddddddf...........
        ................fdddddddddfdddddddddddf...........
        ...............fdddddddddffdddddddddddf...........
        ...............fdddddddddfddddddddddfff...........
        ...............fffdddddfffddddddddddf.............
        .................fffffffddddddddddd8..............
        ..................fddddddddddddd88888.............
        ..................ffddddddd8888888888.............
        ...................fffdd8888888888888.............
        .....................ff88888888888888.............
        .......................8888888888888888888888.....
        .......................8888888888888888888888888..
        .f..........88f8888888888888888888888888888888888.
        fffffffffffffffff88888888888888888888888888888888.
        fffffffffffffffff88888888888888888888888888888dddd
        .........fdfdfff8888888888888888888888888888dddddd
        .........fdddfff8888888888888888888888.....ddddddd
        ........dfffffffd......888888888888888.....ddddddd
        ........dddddfff.......888888888888888.....ddddddd
        ........dddddfff.......888888888888888.....dddddd.
        .............fff.......888888888888888......ddddd.
        .............fff.......888888888888888.......dd...
        .......................888888888888888888.........
        .......................88888888888888888888888....
        .....................888888888888888888888888888..
        ..................8888888888888888888888888888888.
        .................888888888888888888888888888888888
        ................888888888888...........88888888888
        ................88888888888.............8888888888
        ...............888888888888..............888888888
        ...............88888888888................88888888
        ...............8888888888.................88888888
        `, SpriteKind.Boss)
    Final_Boss.setPosition(700, 440)
    statusbar = statusbars.create(20, 4, StatusBarKind.Health)
    statusbar.value = 100
    statusbar.attachToSprite(Final_Boss, 0, 0)
    Level3End = sprites.create(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . 4 4 4 4 . . . . . . 
        . . . . 4 4 4 5 5 4 4 4 . . . . 
        . . . 3 3 3 3 4 4 4 4 4 4 . . . 
        . . 4 3 3 3 3 2 2 2 1 1 4 4 . . 
        . . 3 3 3 3 3 2 2 2 1 1 5 4 . . 
        . 4 3 3 3 3 2 2 2 2 2 5 5 4 4 . 
        . 4 3 3 3 2 2 2 4 4 4 4 5 4 4 . 
        . 4 4 3 3 2 2 4 4 4 4 4 4 4 4 . 
        . 4 2 3 3 2 2 4 4 4 4 4 4 4 4 . 
        . . 4 2 3 3 2 4 4 4 4 4 2 4 . . 
        . . 4 2 2 3 2 2 4 4 4 2 4 4 . . 
        . . . 4 2 2 2 2 2 2 2 2 4 . . . 
        . . . . 4 4 2 2 2 2 4 4 . . . . 
        . . . . . . 4 4 4 4 . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, SpriteKind.ball)
    Level3End.setPosition(735, 445)
}
function Level1 () {
    tiles.setTilemap(tilemap`level1`)
    soldier.setPosition(30, 415)
    attackers.setPosition(1000, 440)
    level1End = sprites.create(img`
        ................86..................
        ...........6688867886...............
        ...........8666877688868............
        ............868777767768............
        .........688667777776688............
        ........67767777777778666...........
        .........6776667767666868...........
        ..........866667667677688...........
        .........8666666666667778...........
        ........667766666666666676..........
        .......67766667666776667776.........
        ......886667776676777666688.........
        .....67766777667767777666768........
        ....6776666666777667776666776.......
        .....8667776667766676677776776......
        ......8777666666667776777776688.....
        ....6887766776677677777777776776....
        ..8866666677767777777777766666778...
        .86666666777667767777766666776668...
        ..88677666666777677677666667776668..
        ..86776677666666666666667776666668..
        886666677766667666666776677766668...
        6668666676667766767767766677666668..
        88866666666777677677667666666776668.
        .86668866666766776776666667766666668
        .86688666666666776666667667776666688
        .668866666666666666666677666666688..
        ..8866686666666666677667776666668...
        ...866886666666666677667776666668...
        ...86886668666666667666666666888....
        ....88866886686666666666666668......
        ......86886668666866668666868.......
        ......88866688668866688866888.......
        ........8888888688888ce868..........
        ..............e88e88.ec.8...........
        ...............eeee..e..............
        ...............ceef.ce..............
        ...............ceefcec..............
        ...............feefce...............
        ...............fceeec...............
        ...............ffceec...............
        `, SpriteKind.tree)
    level1End.setPosition(1100, 430)
}
statusbars.onZero(StatusBarKind.Health, function (status) {
    Final_Boss.destroy(effects.disintegrate, 500)
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Projectile, function (sprite, otherSprite) {
    soldier.destroy(effects.disintegrate, 500)
    game.over(false, effects.melt)
})
sprites.onOverlap(SpriteKind.Projectile, SpriteKind.Enemy, function (sprite, otherSprite) {
    otherSprite.startEffect(effects.disintegrate, 500)
    pause(100)
    otherSprite.setPosition(5000, 500)
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.ball, function (sprite, otherSprite) {
    game.over(true, effects.confetti)
})
let projectile2: Sprite = null
let level1End: Sprite = null
let Level3End: Sprite = null
let Final_Boss: Sprite = null
let statusbar: StatusBarSprite = null
let projectile: Sprite = null
let level2End: Sprite = null
let attackers: Sprite = null
let soldier: Sprite = null
soldier = sprites.create(img`
    ..............................
    ..............................
    ..............................
    ..............................
    ..............................
    ..............................
    .......ffffff.................
    .....ff7777ff.................
    ....ff7777f7f.................
    ....f777ff77f.................
    ....ffff7777f.................
    ....f7777ffff.................
    ...fffffffeee.................
    ...ffe44ebf44.................
    ...fee4d41fdd.................
    ....ff77dddd..fff.............
    ......f77777...f..............
    ......f7fffddfffffffff........
    .....777ff7ddffffff...........
    .....7777777f...f.............
    ......77...7....f.............
    ..............................
    ..............................
    ..............................
    ..............................
    ..............................
    ..............................
    ..............................
    ..............................
    ..............................
    `, SpriteKind.Player)
scene.cameraFollowSprite(soldier)
controller.moveSprite(soldier, 100, 0)
soldier.setStayInScreen(true)
soldier.ay = 100
attackers = sprites.create(img`
    ..............................
    ..............................
    ..............................
    ..............................
    ..............................
    ..............................
    ...............fffffff........
    ...............faaaaaaff......
    ...............faafaaaaff.....
    ...............faaaafaaaf.....
    ...............faaaaaffff.....
    ...............fffffaaaaf.....
    ................aaafffffff....
    ................bb21aaaaff....
    ................dd21aaaaaf....
    ..........fff...ddddaaaaf.....
    ...........f....aaaaaaf.......
    ......fffffffffffffaaaf.......
    ..........fffffdfffaaaff......
    ...........f..f.aaffffff......
    ...........f....ff...ff.......
    ..............................
    ..............................
    ..............................
    ..............................
    ..............................
    ..............................
    ..............................
    ..............................
    ..............................
    `, SpriteKind.Enemy)
Level1()
game.onUpdateInterval(1000, function () {
    projectile2 = sprites.createProjectileFromSprite(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . 2 2 . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, attackers, -50, 0)
})
